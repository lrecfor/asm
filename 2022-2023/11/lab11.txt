14.11.2022

Арифметический сопроцессор.


Регистры.

8 80-ти битных регистров: R0-R7

16-ти битный регистр состояния SWR (Status Word Register)
 b  c3  top  c2  c1  c0  es  sf  pe  ue  oe  ze  de  ie
15  14 13 11 10   9   8   7   6   5   4   3   2   1   0

sf (stack fault) - ошибка стека
es (error summary) - ошибка в работе сопроцессора (одна из шести исключительных ситуаций)
c0-c3 (condition code) - коды условий
top - номер вершины стека
ie (invalide operation error) - недействительная операция
de (denormalized operand error) - денормализованный операнд
ze (divide by zero error) - ошибка деления на ноль
oe (overflow error) - ошибка переполнения (выход результата за максимально допустимый диапазон)
ue (underflow error) - ошибка антипереполнения (результат слишком маленький)
pe (precision error) - ошибка точности (результат пришлось округлить)

16-ти битный управляющий регистр CWR (Control Word Register)

           rc      pc           p   u   o   z   d   i
15  13   11  10   9  8   7  6   5   4   3   2   1   0

p, u, o, z, d, i - маски исключительных ситуаций (1 - исключение обрабатывает сопроцессор, 0 - генерируется прерывание int 10h).

pc - длина мантиссы
00 - 24
10 - 53
11 - 64

rc - округление результата
00 - к ближайшему представимому числу
01 - к меньшему представимому числу
10 - к большему представимому числу
11 - отбрасывание дробной части

16-ти битный регистр слова тегов TWR (Tags Word Register)
Хранит 2-х битовые теги на каждый из регистров R0-R7 (для i-го регистра биты 2i, 2i+1
00 - в регистре допустимое ненулевое значение
01 - в регистре нулевое значение
10 - одно из специальных числовых значений, за исключением нуля
11 - регистр пуст (в него можно загрузить значение)

Специальные числовые значения:
- денормализованные вещественные числа
- ноль
- бесконечность (плюч, минус)
- нечисла: сигнальные (их появление генерирует исключение), спокойные



Пример загрузки значений в регистры сопроцессора
examples\mov

Пример выполнения арифметических действий
examples\arif

Пример сравнения чисел
examples\cmp
